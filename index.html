<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study with me</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Satisfy&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: #5e35b1;
            margin-bottom: 25px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 8px;
            font-weight: 400;
            font-family: 'Pacifico', cursive;
        }

        .header p {
            font-size: 1.6em;
            opacity: 0.85;
            font-weight: 500;
            font-family: 'Satisfy', cursive;
        }

        .container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .person-column {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .person-header {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .exam-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.3em;
            color: #555;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .exam-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .exam-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .exam-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
        }

        .exam-date {
            color: #666;
            font-size: 0.95em;
        }

        .edit-icon-btn {
            background: none;
            border: none;
            font-size: 1em;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .edit-icon-btn:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .exam-countdown {
            font-weight: bold;
            font-size: 1.1em;
            color: #e74c3c;
        }

        .progress-bar-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 18px;
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 18px;
            font-size: 0.9em;
            color: #333;
            font-weight: 600;
        }

        .daily-tasks {
            margin-bottom: 20px;
        }

        .task-item {
            background: #fff3cd;
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 10px;
            border-left: 4px solid #ffc107;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .task-item:hover {
            transform: translateX(3px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .task-text {
            flex: 1;
            font-size: 1em;
        }

        .task-completed {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: background 0.3s, transform 0.2s;
        }

        .delete-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .delete-btn:active {
            transform: scale(0.98);
        }

        .add-section {
            margin-top: 20px;
        }

        .add-btn {
            background: linear-gradient(135deg, #93a5ff 0%, #b794f6 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
            margin-top: 10px;
            transition: background 0.3s;
        }

        .add-btn:hover {
            background: linear-gradient(135deg, #7b8ff7 0%, #9370db 100%);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        input[type="date"],
        input[type="datetime-local"] {
            cursor: pointer;
            position: relative;
        }

        input[type="date"]::-webkit-calendar-picker-indicator,
        input[type="datetime-local"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            font-size: 1.2em;
            padding: 4px;
        }

        /* æ—¥æœŸè¾“å…¥æ¡†å®¹å™¨ */
        .date-input-wrapper {
            position: relative;
            margin: 5px 0;
        }

        .date-input-wrapper::before {
            content: 'ğŸ“… è€ƒè¯•æ—¥æœŸæ—¶é—´';
            display: block;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }

        input[type="date"].input-field,
        input[type="datetime-local"].input-field {
            background: white;
            color: #333;
        }

        input[type="date"]::-webkit-datetime-edit-text,
        input[type="date"]::-webkit-datetime-edit-month-field,
        input[type="date"]::-webkit-datetime-edit-day-field,
        input[type="date"]::-webkit-datetime-edit-year-field,
        input[type="datetime-local"]::-webkit-datetime-edit-text,
        input[type="datetime-local"]::-webkit-datetime-edit-month-field,
        input[type="datetime-local"]::-webkit-datetime-edit-day-field,
        input[type="datetime-local"]::-webkit-datetime-edit-year-field,
        input[type="datetime-local"]::-webkit-datetime-edit-hour-field,
        input[type="datetime-local"]::-webkit-datetime-edit-minute-field {
            color: #333;
        }

        input[type="date"]:invalid,
        input[type="datetime-local"]:invalid {
            color: #999;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            min-width: 300px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .modal-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        .modal-btn-confirm {
            background: #667eea;
            color: white;
        }

        .modal-btn-cancel {
            background: #ccc;
            color: #333;
        }

        /* èŠå¤©æ¡†æ ·å¼ - ä¾§è¾¹é¢æ¿ */
        .chat-container {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            transition: right 0.3s ease;
        }

        .chat-container.open {
            right: 0;
        }

        .chat-toggle-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            z-index: 999;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .chat-toggle-btn:active {
            transform: scale(0.95);
        }

        .chat-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            font-size: 1.2em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .chat-close-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.5em;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .chat-close-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .chat-message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .message-sender {
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .message-sender.nfs {
            color: #667eea;
        }

        .message-sender.yzj {
            color: #764ba2;
        }

        .message-content {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            word-wrap: break-word;
            max-width: 85%;
        }

        .message-content.nfs {
            align-self: flex-start;
            border-left: 3px solid #667eea;
        }

        .message-content.yzj {
            align-self: flex-end;
            border-left: 3px solid #764ba2;
        }

        .message-time {
            font-size: 0.75em;
            color: #999;
            margin-top: 4px;
        }

        .chat-input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-sender-select {
            padding: 10px 14px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.95em;
            cursor: pointer;
            background: white;
            transition: border-color 0.3s;
        }

        .chat-sender-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .chat-input-row {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .chat-send-btn {
            background: linear-gradient(135deg, #93a5ff 0%, #b794f6 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }

        .chat-send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(147, 165, 255, 0.5);
        }

        .chat-send-btn:active {
            transform: translateY(0);
        }

        /* ç»Ÿè®¡æ¨¡å—æ ·å¼ */
        .stats-section {
            max-width: 1400px;
            margin: 30px auto;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .stats-header {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .stats-tabs {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .stats-tab {
            padding: 10px 25px;
            border: 2px solid #667eea;
            border-radius: 20px;
            background: white;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .stats-tab.active {
            background: linear-gradient(135deg, #93a5ff 0%, #b794f6 100%);
            color: white;
        }

        .stats-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(147, 165, 255, 0.4);
        }

        .stats-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .stat-card.nfs {
            border-left: 5px solid #667eea;
        }

        .stat-card.yzj {
            border-left: 5px solid #764ba2;
        }

        .stat-card.winner {
            background: linear-gradient(135deg, #fff9e6 0%, #ffe8a1 100%);
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }

        .stat-card.winner::after {
            content: 'ğŸ†';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2em;
        }

        .stat-name {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .stat-name.nfs {
            color: #667eea;
        }

        .stat-name.yzj {
            color: #764ba2;
        }

        .stat-time {
            font-size: 3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1em;
            color: #666;
        }

        .time-input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .time-input-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
        }

        .time-input-header {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .time-input-header.nfs {
            color: #667eea;
        }

        .time-input-header.yzj {
            color: #764ba2;
        }

        .time-input-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .time-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
        }

        .time-add-btn {
            background: linear-gradient(135deg, #93a5ff 0%, #b794f6 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            white-space: nowrap;
            transition: transform 0.2s;
        }

        .time-add-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #7b8ff7 0%, #9370db 100%);
        }

        .chart-container {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .container {
                flex-direction: column;
                gap: 15px;
            }

            .person-column {
                padding: 20px;
            }

            .person-header {
                font-size: 1.6em;
            }

            .exam-name {
                font-size: 1em;
            }

            .exam-date {
                font-size: 0.85em;
            }

            .exam-countdown {
                font-size: 0.95em;
            }

            .input-field {
                font-size: 16px;
            }

            input[type="date"],
            input[type="datetime-local"] {
                max-width: 100%;
                font-size: 14px;
            }

            input[type="date"]::-webkit-calendar-picker-indicator,
            input[type="datetime-local"]::-webkit-calendar-picker-indicator {
                font-size: 1em;
                cursor: pointer;
                padding: 2px;
            }

            .date-input-wrapper::before {
                font-size: 0.85em;
            }

            .chat-container {
                width: 100%;
                right: -100%;
            }

            .chat-toggle-btn {
                width: 50px;
                height: 50px;
                font-size: 1.3em;
            }

            .stats-comparison {
                grid-template-columns: 1fr;
            }

            .time-input-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .stat-time {
                font-size: 2.5em;
            }

            .stats-tab {
                padding: 8px 15px;
                font-size: 0.9em;
            }

            #studyChart {
                height: 250px !important;
            }

            .chart-container {
                padding: 15px;
            }

            .time-input {
                flex: 0 0 200px;
                max-width: 200px;
            }

            input[type="datetime-local"].input-field {
                width: auto;
                max-width: 100%;
            }

            .date-input-wrapper input {
                max-width: 100%;
            }
        }
    </style>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="header">
        <h1>Study with me ğŸ“š</h1>
        <p>å®Œç¾couple ğŸ’•</p>
    </div>

    <div class="container">
        <!-- nfs æ  -->
        <div class="person-column">
            <div class="person-header">nfsğŸ“–</div>

            <div class="exam-section">
                <div class="section-title">ğŸ“‹ è€ƒè¯•åˆ—è¡¨</div>
                <div id="nfs-exams"></div>
            </div>

            <div class="daily-tasks">
                <div class="section-title">âœ¨ ä»Šæ—¥å­¦ä¹ é¡¹</div>
                <div id="nfs-tasks"></div>
            </div>

            <div class="add-section">
                <input type="text" id="nfs-exam-name" class="input-field" placeholder="è€ƒè¯•åç§°">
                <div class="date-input-wrapper">
                    <input type="datetime-local" id="nfs-exam-date" class="input-field">
                </div>
                <button class="add-btn" onclick="addExam('nfs')">â• æ·»åŠ è€ƒè¯•</button>

                <input type="text" id="nfs-task-input" class="input-field" placeholder="ä»Šæ—¥å­¦ä¹ ä»»åŠ¡" style="margin-top: 15px;">
                <button class="add-btn" onclick="addTask('nfs')">â• æ·»åŠ å­¦ä¹ é¡¹</button>
            </div>
        </div>

        <!-- yzj æ  -->
        <div class="person-column">
            <div class="person-header">yzjğŸ“‘</div>

            <div class="exam-section">
                <div class="section-title">ğŸ“‹ è€ƒè¯•åˆ—è¡¨</div>
                <div id="yzj-exams"></div>
            </div>

            <div class="daily-tasks">
                <div class="section-title">âœ¨ ä»Šæ—¥å­¦ä¹ é¡¹</div>
                <div id="yzj-tasks"></div>
            </div>

            <div class="add-section">
                <input type="text" id="yzj-exam-name" class="input-field" placeholder="è€ƒè¯•åç§°">
                <div class="date-input-wrapper">
                    <input type="datetime-local" id="yzj-exam-date" class="input-field">
                </div>
                <button class="add-btn" onclick="addExam('yzj')">â• æ·»åŠ è€ƒè¯•</button>

                <input type="text" id="yzj-task-input" class="input-field" placeholder="ä»Šæ—¥å­¦ä¹ ä»»åŠ¡" style="margin-top: 15px;">
                <button class="add-btn" onclick="addTask('yzj')">â• æ·»åŠ å­¦ä¹ é¡¹</button>
            </div>
        </div>
    </div>

    <!-- ç»Ÿè®¡æ¨¡å— -->
    <div class="stats-section">
        <div class="stats-header">ğŸ“Š å­¦ä¹ æ—¶é•¿ç»Ÿè®¡</div>

        <div class="stats-tabs">
            <button class="stats-tab active" onclick="switchStatsPeriod('today')">ä»Šæ—¥</button>
            <button class="stats-tab" onclick="switchStatsPeriod('week')">æœ¬å‘¨</button>
            <button class="stats-tab" onclick="switchStatsPeriod('month')">æœ¬æœˆ</button>
        </div>

        <div class="time-input-section">
            <div class="time-input-card">
                <div class="time-input-header nfs">nfsğŸ“– è®°å½•å­¦ä¹ æ—¶é•¿</div>
                <div class="time-input-row">
                    <input type="number" id="nfs-time-input" class="time-input" placeholder="åˆ†é’Ÿ" min="1">
                    <button class="time-add-btn" onclick="addStudyTime('nfs')">â• æ·»åŠ </button>
                </div>
            </div>
            <div class="time-input-card">
                <div class="time-input-header yzj">yzjğŸ“‘ è®°å½•å­¦ä¹ æ—¶é•¿</div>
                <div class="time-input-row">
                    <input type="number" id="yzj-time-input" class="time-input" placeholder="åˆ†é’Ÿ" min="1">
                    <button class="time-add-btn" onclick="addStudyTime('yzj')">â• æ·»åŠ </button>
                </div>
            </div>
        </div>

        <div class="stats-comparison" id="stats-comparison">
            <!-- ç»Ÿè®¡å¡ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>

        <div class="chart-container">
            <div class="chart-title">ğŸ“ˆ å­¦ä¹ æ—¶é•¿è¶‹åŠ¿</div>
            <canvas id="studyChart"></canvas>
        </div>
    </div>

    <!-- è¿›åº¦ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="progress-modal" class="modal">
        <div class="modal-content">
            <h3>è®¾ç½®å¤ä¹ è¿›åº¦</h3>
            <input type="number" id="progress-completed" class="input-field" placeholder="å·²å®Œæˆ" min="0">
            <input type="number" id="progress-total" class="input-field" placeholder="æ€»æ•°" min="1">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" onclick="saveProgress()">ç¡®å®š</button>
                <button class="modal-btn modal-btn-cancel" onclick="closeModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- è€ƒè¯•ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="exam-edit-modal" class="modal">
        <div class="modal-content">
            <h3>ç¼–è¾‘è€ƒè¯•</h3>
            <input type="text" id="edit-exam-name" class="input-field" placeholder="è€ƒè¯•åç§°">
            <div class="date-input-wrapper">
                <input type="datetime-local" id="edit-exam-date" class="input-field">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" onclick="saveExamEdit()">ä¿å­˜</button>
                <button class="modal-btn" style="background: #e74c3c; color: white;" onclick="confirmDeleteExam()">åˆ é™¤</button>
                <button class="modal-btn modal-btn-cancel" onclick="closeExamEditModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- ä»»åŠ¡å®Œæˆæ—¶é—´è¾“å…¥æ¨¡æ€æ¡† -->
    <div id="task-time-modal" class="modal">
        <div class="modal-content">
            <h3>è®°å½•å®Œæˆæ—¶é—´</h3>
            <p style="color: #666; margin-bottom: 15px;">å®Œæˆè¿™ä¸ªä»»åŠ¡èŠ±äº†å¤šå°‘æ—¶é—´ï¼Ÿ</p>
            <input type="number" id="task-time-input" class="input-field" placeholder="åˆ†é’Ÿæ•°" min="1">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-confirm" onclick="saveTaskTime()">ç¡®å®š</button>
                <button class="modal-btn modal-btn-cancel" onclick="skipTaskTime()">è·³è¿‡</button>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨èŠå¤©æŒ‰é’® -->
    <button class="chat-toggle-btn" onclick="toggleChat()">ğŸ’¬</button>

    <!-- èŠå¤©æ¡† -->
    <div id="chat-container" class="chat-container">
        <div class="chat-header">
            <span>ğŸ’¬ èŠå¤©å®¤</span>
            <button class="chat-close-btn" onclick="toggleChat()">Ã—</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- èŠå¤©æ¶ˆæ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        <div class="chat-input-area">
            <select id="chat-sender" class="chat-sender-select">
                <option value="nfs">nfsğŸ“–</option>
                <option value="yzj">yzjğŸ“‘</option>
            </select>
            <div class="chat-input-row">
                <input type="text" id="chat-input" class="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯..." onkeypress="handleChatKeyPress(event)">
                <button class="chat-send-btn" onclick="sendMessage()">å‘é€</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyB2rmYFvf1RXtuSsDaNui__JF9Pzv7kMYY",
            authDomain: "study-with-me-5631f.firebaseapp.com",
            databaseURL: "https://study-with-me-5631f-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "study-with-me-5631f",
            storageBucket: "study-with-me-5631f.firebasestorage.app",
            messagingSenderId: "128989556124",
            appId: "1:128989556124:web:db34bf7b4eff84335fac59"
        };

        // åˆå§‹åŒ– Firebase
        let database;
        try {
            firebase.initializeApp(firebaseConfig);
            database = firebase.database();
            console.log('Firebase å·²è¿æ¥');
        } catch (error) {
            console.warn('Firebase æœªé…ç½®ï¼Œä½¿ç”¨æœ¬åœ°å­˜å‚¨æ¨¡å¼');
            database = null;
        }

        let currentEditingProgress = null;
        let currentEditingExam = null; // å­˜å‚¨å½“å‰ç¼–è¾‘çš„è€ƒè¯•ä¿¡æ¯
        let currentTaskCompletion = null; // å­˜å‚¨å½“å‰å®Œæˆçš„ä»»åŠ¡ä¿¡æ¯
        let currentStatsPeriod = 'today';
        let studyChart = null;
        let data = {
            nfs: { exams: [], tasks: [] },
            yzj: { exams: [], tasks: [] },
            messages: [],
            studyTime: {
                nfs: [],
                yzj: []
            }
        };

        // åŠ è½½æ•°æ®
        function loadData() {
            if (database) {
                // ä½¿ç”¨ Firebase å®æ—¶åŒæ­¥
                database.ref('studyData').on('value', (snapshot) => {
                    const savedData = snapshot.val();
                    if (savedData) {
                        data = {
                            nfs: savedData.nfs || { exams: [], tasks: [] },
                            yzj: savedData.yzj || { exams: [], tasks: [] },
                            messages: savedData.messages || [],
                            studyTime: savedData.studyTime || { nfs: [], yzj: [] }
                        };
                        renderAll();
                        renderStats();
                        renderChart();
                    }
                });
            } else {
                // ä½¿ç”¨æœ¬åœ°å­˜å‚¨
                const saved = localStorage.getItem('studyData');
                if (saved) {
                    data = JSON.parse(saved);
                    if (!data.messages) {
                        data.messages = [];
                    }
                    if (!data.studyTime) {
                        data.studyTime = { nfs: [], yzj: [] };
                    }
                }
                renderAll();
                renderStats();
                renderChart();
            }
            updateCountdowns();
            setInterval(updateCountdowns, 60000); // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡å€’è®¡æ—¶
        }

        // ä¿å­˜æ•°æ®
        function saveData() {
            if (database) {
                // ä¿å­˜åˆ° Firebase
                database.ref('studyData').set(data);
            } else {
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('studyData', JSON.stringify(data));
            }
        }

        // è®¡ç®—å€’è®¡æ—¶
        function calculateCountdown(examDate) {
            const now = new Date();
            const exam = new Date(examDate);
            const diff = exam - now;

            if (diff < 0) {
                return 'å·²ç»“æŸ';
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

            // æ ¹æ®æ—¶é—´é•¿åº¦æ™ºèƒ½æ˜¾ç¤º
            if (days > 0) {
                return `è¿˜æœ‰${days}d${hours}h${minutes}m`;
            } else if (hours > 0) {
                return `è¿˜æœ‰${hours}h${minutes}m`;
            } else if (minutes > 0) {
                return `è¿˜æœ‰${minutes}m`;
            } else {
                return 'å³å°†å¼€å§‹';
            }
        }

        // æ›´æ–°æ‰€æœ‰å€’è®¡æ—¶
        function updateCountdowns() {
            ['nfs', 'yzj'].forEach(person => {
                data[person].exams.forEach((exam, index) => {
                    const element = document.querySelector(`#${person}-exams .exam-item:nth-child(${index + 1}) .exam-countdown`);
                    if (element) {
                        element.textContent = calculateCountdown(exam.date);
                    }
                });
            });
        }

        // æ·»åŠ è€ƒè¯•
        function addExam(person) {
            const nameInput = document.getElementById(`${person}-exam-name`);
            const dateInput = document.getElementById(`${person}-exam-date`);

            if (nameInput.value && dateInput.value) {
                // ç¡®ä¿æ•°æ®ç»“æ„å­˜åœ¨
                if (!data[person]) {
                    data[person] = { exams: [], tasks: [] };
                }
                if (!data[person].exams) {
                    data[person].exams = [];
                }

                data[person].exams.push({
                    name: nameInput.value,
                    date: dateInput.value,
                    completed: 0,
                    total: 100
                });

                nameInput.value = '';
                dateInput.value = '';
                saveData();
                renderExams(person);
            }
        }

        // åˆ é™¤è€ƒè¯•
        function deleteExam(person, index) {
            data[person].exams.splice(index, 1);
            saveData();
            renderExams(person);
        }

        // æ‰“å¼€è€ƒè¯•ç¼–è¾‘æ¨¡æ€æ¡†
        function openExamEditModal(person, index) {
            currentEditingExam = { person, index };
            const exam = data[person].exams[index];
            document.getElementById('edit-exam-name').value = exam.name;
            document.getElementById('edit-exam-date').value = exam.date;
            document.getElementById('exam-edit-modal').style.display = 'flex';
        }

        // å…³é—­è€ƒè¯•ç¼–è¾‘æ¨¡æ€æ¡†
        function closeExamEditModal() {
            document.getElementById('exam-edit-modal').style.display = 'none';
            currentEditingExam = null;
        }

        // ä¿å­˜è€ƒè¯•ç¼–è¾‘
        function saveExamEdit() {
            if (currentEditingExam) {
                const name = document.getElementById('edit-exam-name').value;
                const date = document.getElementById('edit-exam-date').value;

                if (name && date) {
                    const { person, index } = currentEditingExam;
                    data[person].exams[index].name = name;
                    data[person].exams[index].date = date;

                    saveData();
                    renderExams(person);
                    closeExamEditModal();
                }
            }
        }

        // ä»ç¼–è¾‘æ¨¡æ€æ¡†ä¸­åˆ é™¤è€ƒè¯•
        function confirmDeleteExam() {
            if (currentEditingExam && confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè€ƒè¯•å—ï¼Ÿ')) {
                const { person, index } = currentEditingExam;
                deleteExam(person, index);
                closeExamEditModal();
            }
        }

        // æ¸²æŸ“è€ƒè¯•åˆ—è¡¨
        function renderExams(person) {
            const container = document.getElementById(`${person}-exams`);
            container.innerHTML = '';

            // ç¡®ä¿æ•°æ®ç»“æ„å­˜åœ¨
            if (!data[person]) {
                data[person] = { exams: [], tasks: [] };
            }
            if (!data[person].exams) {
                data[person].exams = [];
            }

            data[person].exams.forEach((exam, index) => {
                const percentage = exam.total > 0 ? (exam.completed / exam.total * 100) : 0;
                const examDiv = document.createElement('div');
                examDiv.className = 'exam-item';
                examDiv.innerHTML = `
                    <div class="exam-header">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                                <span class="exam-name">${exam.name}</span>
                                <button class="edit-icon-btn" onclick="openExamEditModal('${person}', ${index})" title="ç¼–è¾‘è€ƒè¯•">âš™ï¸</button>
                            </div>
                            <div class="exam-date">ğŸ“… ${exam.date}</div>
                        </div>
                        <div>
                            <span class="exam-countdown">${calculateCountdown(exam.date)}</span>
                        </div>
                    </div>
                    <div class="progress-bar-container" ondblclick="openProgressModal('${person}', ${index})">
                        <div class="progress-bar" style="width: ${percentage}%"></div>
                        <div class="progress-text">${exam.completed}/${exam.total} (${Math.round(percentage)}%)</div>
                    </div>
                `;
                container.appendChild(examDiv);
            });
        }

        // æ‰“å¼€è¿›åº¦ç¼–è¾‘æ¨¡æ€æ¡†
        function openProgressModal(person, index) {
            currentEditingProgress = { person, index };
            const exam = data[person].exams[index];
            document.getElementById('progress-completed').value = exam.completed;
            document.getElementById('progress-total').value = exam.total;
            document.getElementById('progress-modal').style.display = 'flex';
        }

        // ä¿å­˜è¿›åº¦
        function saveProgress() {
            if (currentEditingProgress) {
                const completed = parseInt(document.getElementById('progress-completed').value) || 0;
                const total = parseInt(document.getElementById('progress-total').value) || 1;

                const { person, index } = currentEditingProgress;
                data[person].exams[index].completed = completed;
                data[person].exams[index].total = total;

                saveData();
                renderExams(person);
                closeModal();
            }
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('progress-modal').style.display = 'none';
            currentEditingProgress = null;
        }

        // ä¿å­˜ä»»åŠ¡å®Œæˆæ—¶é—´
        function saveTaskTime() {
            if (currentTaskCompletion) {
                const minutes = parseInt(document.getElementById('task-time-input').value);
                const { person } = currentTaskCompletion;

                if (minutes && minutes > 0) {
                    // æ·»åŠ å­¦ä¹ æ—¶é•¿è®°å½•
                    const record = {
                        minutes: minutes,
                        timestamp: new Date().toISOString()
                    };

                    if (!data.studyTime) {
                        data.studyTime = { nfs: [], yzj: [] };
                    }

                    data.studyTime[person].push(record);

                    // æ›´æ–°ç»Ÿè®¡å›¾è¡¨
                    renderStats();
                    renderChart();
                }

                // æ— è®ºæ˜¯å¦è¾“å…¥æ—¶é—´ï¼Œéƒ½è¦ä¿å­˜ä»»åŠ¡å®ŒæˆçŠ¶æ€
                saveData();
                renderTasks(person);

                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('task-time-modal').style.display = 'none';
                currentTaskCompletion = null;
            }
        }

        // è·³è¿‡ä»»åŠ¡æ—¶é—´è¾“å…¥
        function skipTaskTime() {
            if (currentTaskCompletion) {
                const { person } = currentTaskCompletion;

                // ç›´æ¥ä¿å­˜ä»»åŠ¡å®ŒæˆçŠ¶æ€ï¼Œä¸è®°å½•æ—¶é—´
                saveData();
                renderTasks(person);

                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('task-time-modal').style.display = 'none';
                currentTaskCompletion = null;
            }
        }

        // æ·»åŠ ä»»åŠ¡
        function addTask(person) {
            const input = document.getElementById(`${person}-task-input`);
            if (input.value) {
                // ç¡®ä¿æ•°æ®ç»“æ„å­˜åœ¨
                if (!data[person]) {
                    data[person] = { exams: [], tasks: [] };
                }
                if (!data[person].tasks) {
                    data[person].tasks = [];
                }

                data[person].tasks.push({
                    text: input.value,
                    completed: false
                });
                input.value = '';
                saveData();
                renderTasks(person);
            }
        }

        // åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
        function toggleTask(person, index) {
            const task = data[person].tasks[index];
            const wasCompleted = task.completed;

            // åˆ‡æ¢å®ŒæˆçŠ¶æ€
            task.completed = !task.completed;

            // å¦‚æœä»æœªå®Œæˆå˜ä¸ºå®Œæˆï¼Œå¼¹å‡ºæ—¶é—´è¾“å…¥æ¡†
            if (!wasCompleted && task.completed) {
                currentTaskCompletion = { person, index };
                document.getElementById('task-time-input').value = '';
                document.getElementById('task-time-modal').style.display = 'flex';
            } else {
                // å¦‚æœæ˜¯å–æ¶ˆå®Œæˆï¼Œç›´æ¥ä¿å­˜
                saveData();
                renderTasks(person);
            }
        }

        // åˆ é™¤ä»»åŠ¡
        function deleteTask(person, index) {
            data[person].tasks.splice(index, 1);
            saveData();
            renderTasks(person);
        }

        // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
        function renderTasks(person) {
            const container = document.getElementById(`${person}-tasks`);
            container.innerHTML = '';

            // ç¡®ä¿æ•°æ®ç»“æ„å­˜åœ¨
            if (!data[person]) {
                data[person] = { exams: [], tasks: [] };
            }
            if (!data[person].tasks) {
                data[person].tasks = [];
            }

            data[person].tasks.forEach((task, index) => {
                const taskDiv = document.createElement('div');
                taskDiv.className = 'task-item';
                taskDiv.innerHTML = `
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''}
                           onchange="toggleTask('${person}', ${index})">
                    <span class="task-text ${task.completed ? 'task-completed' : ''}">${task.text}</span>
                    <button class="delete-btn" onclick="deleteTask('${person}', ${index})">åˆ é™¤</button>
                `;
                container.appendChild(taskDiv);
            });
        }

        // æ¸²æŸ“æ‰€æœ‰
        function renderAll() {
            ['nfs', 'yzj'].forEach(person => {
                renderExams(person);
                renderTasks(person);
            });
            renderChat();
        }

        // èŠå¤©åŠŸèƒ½
        function toggleChat() {
            const chatContainer = document.getElementById('chat-container');
            chatContainer.classList.toggle('open');
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const sender = document.getElementById('chat-sender').value;
            const message = input.value.trim();

            if (message) {
                const newMessage = {
                    sender: sender,
                    text: message,
                    time: new Date().toISOString()
                };

                if (!data.messages) {
                    data.messages = [];
                }

                data.messages.push(newMessage);
                input.value = '';

                // ç«‹å³æ¸²æŸ“èŠå¤©ï¼ˆä¸ç­‰å¾…Firebaseå›è°ƒï¼‰
                renderChat();

                // ç„¶åä¿å­˜åˆ°Firebaseæˆ–localStorage
                saveData();

                // æ»šåŠ¨åˆ°åº•éƒ¨
                setTimeout(() => {
                    const messagesDiv = document.getElementById('chat-messages');
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                }, 100);
            }
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function renderChat() {
            const container = document.getElementById('chat-messages');
            container.innerHTML = '';

            if (!data.messages) {
                data.messages = [];
            }

            data.messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';

                const time = new Date(msg.time);
                const timeStr = `${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')}`;

                messageDiv.innerHTML = `
                    <div class="message-sender ${msg.sender}">${msg.sender === 'nfs' ? 'nfsğŸ“–' : 'yzjğŸ“‘'}</div>
                    <div class="message-content ${msg.sender}">${msg.text}</div>
                    <div class="message-time">${timeStr}</div>
                `;

                container.appendChild(messageDiv);
            });

            // æ»šåŠ¨åˆ°åº•éƒ¨
            container.scrollTop = container.scrollHeight;
        }

        // ç»Ÿè®¡åŠŸèƒ½
        function addStudyTime(person) {
            const input = document.getElementById(`${person}-time-input`);
            const minutes = parseInt(input.value);

            if (minutes && minutes > 0) {
                const record = {
                    minutes: minutes,
                    timestamp: new Date().toISOString()
                };

                if (!data.studyTime) {
                    data.studyTime = { nfs: [], yzj: [] };
                }

                data.studyTime[person].push(record);
                input.value = '';
                saveData();
                renderStats();
                renderChart();
            }
        }

        function switchStatsPeriod(period) {
            currentStatsPeriod = period;

            // æ›´æ–°æ ‡ç­¾æ ·å¼
            document.querySelectorAll('.stats-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            renderStats();
            renderChart();
        }

        function getDateRangeStart(period) {
            const now = new Date();
            const start = new Date();

            if (period === 'today') {
                start.setHours(0, 0, 0, 0);
            } else if (period === 'week') {
                const day = now.getDay();
                const diff = now.getDate() - day + (day === 0 ? -6 : 1); // å‘¨ä¸€å¼€å§‹
                start.setDate(diff);
                start.setHours(0, 0, 0, 0);
            } else if (period === 'month') {
                start.setDate(1);
                start.setHours(0, 0, 0, 0);
            }

            return start;
        }

        function calculateTotalTime(person, period) {
            if (!data.studyTime || !data.studyTime[person]) {
                return 0;
            }

            const startDate = getDateRangeStart(period);

            return data.studyTime[person]
                .filter(record => new Date(record.timestamp) >= startDate)
                .reduce((total, record) => total + record.minutes, 0);
        }

        function formatTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;

            if (hours > 0) {
                return `${hours}h ${mins}m`;
            }
            return `${mins}m`;
        }

        function renderStats() {
            const container = document.getElementById('stats-comparison');
            container.innerHTML = '';

            const nfsTime = calculateTotalTime('nfs', currentStatsPeriod);
            const yzjTime = calculateTotalTime('yzj', currentStatsPeriod);

            const periodText = currentStatsPeriod === 'today' ? 'ä»Šæ—¥' :
                             currentStatsPeriod === 'week' ? 'æœ¬å‘¨' : 'æœ¬æœˆ';

            // nfs å¡ç‰‡
            const nfsCard = document.createElement('div');
            nfsCard.className = 'stat-card nfs' + (nfsTime > yzjTime && nfsTime > 0 ? ' winner' : '');
            nfsCard.innerHTML = `
                <div class="stat-name nfs">nfsğŸ“–</div>
                <div class="stat-time">${formatTime(nfsTime)}</div>
                <div class="stat-label">${periodText}å­¦ä¹ æ—¶é•¿</div>
            `;
            container.appendChild(nfsCard);

            // yzj å¡ç‰‡
            const yzjCard = document.createElement('div');
            yzjCard.className = 'stat-card yzj' + (yzjTime > nfsTime && yzjTime > 0 ? ' winner' : '');
            yzjCard.innerHTML = `
                <div class="stat-name yzj">yzjğŸ“‘</div>
                <div class="stat-time">${formatTime(yzjTime)}</div>
                <div class="stat-label">${periodText}å­¦ä¹ æ—¶é•¿</div>
            `;
            container.appendChild(yzjCard);
        }

        function renderChart() {
            const canvas = document.getElementById('studyChart');
            const ctx = canvas.getContext('2d');

            if (studyChart) {
                studyChart.destroy();
            }

            const labels = [];
            const nfsData = [];
            const yzjData = [];

            const startDate = getDateRangeStart(currentStatsPeriod);
            const now = new Date();

            if (currentStatsPeriod === 'today') {
                // æŒ‰å°æ—¶ç»Ÿè®¡
                for (let hour = 0; hour < 24; hour++) {
                    labels.push(`${hour}:00`);
                    nfsData.push(0);
                    yzjData.push(0);
                }

                if (data.studyTime) {
                    ['nfs', 'yzj'].forEach(person => {
                        data.studyTime[person].forEach(record => {
                            const recordDate = new Date(record.timestamp);
                            if (recordDate >= startDate) {
                                const hour = recordDate.getHours();
                                if (person === 'nfs') {
                                    nfsData[hour] += record.minutes;
                                } else {
                                    yzjData[hour] += record.minutes;
                                }
                            }
                        });
                    });
                }
            } else {
                // æŒ‰å¤©ç»Ÿè®¡
                const days = currentStatsPeriod === 'week' ? 7 : 30;
                for (let i = 0; i < days; i++) {
                    const date = new Date(startDate);
                    date.setDate(date.getDate() + i);
                    labels.push(`${date.getMonth() + 1}/${date.getDate()}`);
                    nfsData.push(0);
                    yzjData.push(0);
                }

                if (data.studyTime) {
                    ['nfs', 'yzj'].forEach(person => {
                        data.studyTime[person].forEach(record => {
                            const recordDate = new Date(record.timestamp);
                            if (recordDate >= startDate && recordDate <= now) {
                                const dayDiff = Math.floor((recordDate - startDate) / (1000 * 60 * 60 * 24));
                                if (dayDiff >= 0 && dayDiff < labels.length) {
                                    if (person === 'nfs') {
                                        nfsData[dayDiff] += record.minutes;
                                    } else {
                                        yzjData[dayDiff] += record.minutes;
                                    }
                                }
                            }
                        });
                    });
                }
            }

            studyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'nfsğŸ“–',
                            data: nfsData,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'yzjğŸ“‘',
                            data: yzjData,
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatTime(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatTime(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = loadData;
    </script>
</body>
</html>
